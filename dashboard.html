<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fire Extinguisher Robot | Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
  body {
    font-family: 'Inter', sans-serif;
    background: radial-gradient(circle at 20% 20%, #09160f, #010a06 85%);
    color: #eaffea;
    overflow-x: hidden;
    min-height: 100vh;
  }

  header {
    background: rgba(15, 40, 25, 0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(0, 255, 128, 0.2);
    box-shadow: 0 5px 25px rgba(0, 255, 128, 0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
  }

  .brand-text {
    font-size: 1.8rem;
    font-weight: 700;
    background: linear-gradient(to right, #ff9100, #00ff99);
    background-clip: text;
    color: transparent;
  }

  .neon-btn {
    background: linear-gradient(135deg, #ff3b3b, #ff9100);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    padding: 10px 18px;
    transition: 0.3s;
    box-shadow: 0 0 15px rgba(255, 87, 34, 0.4);
  }

  .neon-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 25px rgba(255, 87, 34, 0.7);
  }

  .tab-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 25px;
    flex-wrap: wrap;
  }

  .tab-btn {
    padding: 10px 25px;
    border-radius: 10px;
    font-weight: 600;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .tab-btn:hover {
    background: rgba(0, 255, 128, 0.2);
    color: #00ff99;
    box-shadow: 0 0 10px rgba(0, 255, 128, 0.3);
  }

  .tab-btn.active {
    background: linear-gradient(135deg, #ff9100, #00ff99);
    color: #000;
    box-shadow: 0 0 15px rgba(0, 255, 128, 0.4);
  }

  /* --- Fixed chart box --- */
  .chart-container {
    width: 90%;               /* Fill almost full width */
    max-width: 1300px;        /* Limit on large screens */
    margin: 0 auto;           /* Center it */
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    height: 550px;            /* Taller for full chart visibility */
    display: none;
    opacity: 0;
    transform: scale(0.98);
    transition: all 0.5s ease;
    overflow: hidden;
  }

  .chart-container.active {
    display: block;
    opacity: 1;
    transform: scale(1);
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  footer {
    background: rgba(15, 40, 25, 0.9);
    text-align: center;
    padding: 25px 5%;
    color: rgba(255, 255, 255, 0.6);
    margin-top: 50px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .fade-in {
    animation: fadeInUp 0.7s ease;
  }
</style>

</head>

<body>
  <!-- Header -->
  <header class="p-4">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <i class="fas fa-robot text-orange-400 text-2xl"></i>
        <h1 class="brand-text">FIRE EXTINGUISHER ROBOT</h1>
      </div>
      <div class="flex items-center space-x-4">
        <p id="welcome-message" class="text-green-200 text-lg font-medium">Welcome, User!</p>
        <button id="sign-out-btn" class="neon-btn flex items-center space-x-2">
          <i class="fas fa-sign-out-alt"></i><span>Sign Out</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Dashboard -->
  <main class="max-w-7xl mx-auto mt-10 px-6 fade-in">
    <div class="text-center mb-10">
      <h2 class="text-4xl font-bold bg-gradient-to-r from-orange-300 to-green-400 bg-clip-text text-transparent">
        Fire Extinguisher Robot Dashboard
      </h2>
      <p class="text-gray-400 mt-3 text-lg">Switch between live sensor graphs below</p>
    </div>

    <!-- Tabs -->
    <div class="tab-buttons">
      <button class="tab-btn active" data-tab="ultrasonic">
        <i class="fas fa-wave-square mr-2"></i> Ultrasonic
      </button>
      <button class="tab-btn" data-tab="smoke">
        <i class="fas fa-smog mr-2"></i> Smoke
      </button>
      <button class="tab-btn" data-tab="flame">
        <i class="fas fa-fire mr-2"></i> Flame
      </button>
    </div>

    <!-- Graphs -->
<!-- Graphs -->
<div class="chart-wrapper">
  <div id="ultrasonic" class="chart-container active">
    <iframe src="https://thingspeak.com/channels/3140222/charts/2?bgcolor=%23091006&color=%23ff9100&dynamic=true&type=line&update=15"></iframe>
  </div>

  <div id="smoke" class="chart-container">
    <iframe src="https://thingspeak.com/channels/3140222/charts/1?bgcolor=%23091006&color=%2300ff99&dynamic=true&type=line&update=15"></iframe>
  </div>

  <div id="flame" class="chart-container">
    <iframe src="https://thingspeak.com/channels/3140222/charts/3?bgcolor=%23091006&color=%23ff3b3b&dynamic=true&type=line&update=15"></iframe>
  </div>
</div>


    <!-- Overview -->
    <div class="mt-12 text-center p-8 mx-auto max-w-4xl bg-[rgba(255,255,255,0.05)] border border-[rgba(255,255,255,0.12)] rounded-2xl backdrop-blur-md shadow-lg">
      <h3 class="text-2xl font-semibold text-green-300 mb-3">
        <i class="fas fa-tachometer-alt mr-2"></i> System Overview
      </h3>
      <p class="text-gray-300 text-lg">
        The Fire Extinguisher Robot continuously monitors <span class="text-green-400 font-semibold">flame, smoke, and distance</span> sensors in real-time.
        Graphs are updated automatically every <strong>15 seconds</strong>.
      </p>
    </div>
  </main>

  <footer>
    &copy; 2025 Team 14 | Fire Extinguisher Robot â€” Powered by SONIC AIR SENTINEL.
  </footer>

  <!-- Firebase + Tab Logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDKKZ2KgSgV53W_cubnkaIo1qmNRGGrZUU",
      authDomain: "pr-18-aa6d4.firebaseapp.com",
      databaseURL: "https://pr-18-aa6d4-default-rtdb.firebaseio.com",
      projectId: "pr-18-aa6d4",
      storageBucket: "pr-18-aa6d4.firebasestorage.app",
      messagingSenderId: "858386052531",
      appId: "1:858386052531:web:ce61e6c7718ab8b47b47c6",
      measurementId: "G-CBZ56WEQE6"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const welcomeMessage = document.getElementById("welcome-message");
    const signOutBtn = document.getElementById("sign-out-btn");

    signOutBtn.addEventListener("click", async () => {
      await signOut(auth);
      window.location.href = "index.html";
    });

    onAuthStateChanged(auth, (user) => {
      if (user) {
        const name = user.displayName || (user.email ? user.email.split("@")[0] : "User");
        welcomeMessage.textContent = `Welcome, ${name}!`;
      } else {
        setTimeout(() => window.location.href = "index.html", 300);
      }
    });

    // Tab switching
    const tabButtons = document.querySelectorAll(".tab-btn");
    const chartContainers = document.querySelectorAll(".chart-container");

    tabButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        tabButtons.forEach(b => b.classList.remove("active"));
        chartContainers.forEach(c => c.classList.remove("active"));
        btn.classList.add("active");
        document.getElementById(btn.dataset.tab).classList.add("active");
      });
    });
  </script>
</body>
</html>
